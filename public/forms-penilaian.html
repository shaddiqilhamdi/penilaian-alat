<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>Formulir - Penilaian Alat Kerja</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Favicons -->
  <link href="assets/img/favicon.svg" rel="icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect" />
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
  <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet" />

  <!-- Custom Form Penilaian Styles -->
  <style>
    /* Integrity Checkbox */
    .integrity-section {
      background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
      border: 2px solid #ffc107;
      border-radius: 8px;
      padding: 0.75rem 1rem;
    }

    .integrity-section .form-check-input:checked {
      background-color: #198754;
      border-color: #198754;
    }

    .integrity-section.is-checked {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
      border-color: #198754;
    }

    /* Section Cards */
    .section-card {
      border-radius: 8px;
    }

    .section-card .card-header {
      background: #f8f9fa;
    }

    /* Equipment Table */
    #equipmentTable tbody tr:hover {
      background-color: #f0f9ff !important;
    }

    #equipmentTable tbody tr.is-complete {
      background-color: #ecfdf5;
    }

    /* Input Field Styling */
    .equipment-input {
      font-weight: 600;
      text-align: center;
    }

    .equipment-input:focus {
      box-shadow: 0 0 0 2px rgba(13, 110, 253, 0.25);
    }

    /* Score Badge */
    .nilai-equipment {
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.85rem;
    }

    .nilai-positive {
      background: #d1fae5;
      color: #065f46;
    }

    .nilai-negative {
      background: #fee2e2;
      color: #991b1b;
    }

    .nilai-neutral {
      background: #f3f4f6;
      color: #374151;
    }

    /* Equipment Table Header - fix z-index to stay below navbar */
    #equipmentTable thead.sticky-top {
      z-index: 10;
      /* Lower than navbar (navbar is typically z-index: 1030) */
    }

    /* Table container should create stacking context */
    .table-responsive {
      position: relative;
      z-index: 1;
    }

    /* Progress Bar */
    .progress-bar {
      transition: width 0.3s ease;
    }

    .progress-bar.complete {
      background-color: #198754;
    }

    /* Submit Button */
    #submitEvaluationBtn:not(:disabled) {
      background-color: #198754;
      border-color: #198754;
    }

    #submitEvaluationBtn:not(:disabled):hover {
      background-color: #157347;
    }

    /* Mobile Accordion Styles - Clean Design */
    #equipmentAccordion .accordion-item {
      border: 1px solid #e9ecef;
      margin-bottom: 0.25rem;
      border-radius: 6px !important;
      overflow: hidden;
    }

    #equipmentAccordion .accordion-button {
      padding: 0.6rem 0.75rem;
      font-size: 0.9rem;
      background-color: #fff;
      flex-direction: row;
      gap: 0.5rem;
    }

    #equipmentAccordion .accordion-button:not(.collapsed) {
      background-color: #f8f9fa;
      color: #212529;
      box-shadow: none;
    }

    #equipmentAccordion .accordion-button::before {
      flex-shrink: 0;
      width: 1rem;
      height: 1rem;
      content: "";
      background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23212529'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
      background-repeat: no-repeat;
      background-size: 1rem;
      transition: transform 0.2s ease-in-out;
    }

    #equipmentAccordion .accordion-button:not(.collapsed)::before {
      transform: rotate(-180deg);
    }

    #equipmentAccordion .accordion-button::after {
      display: none;
    }

    #equipmentAccordion .accordion-body {
      padding: 0.75rem;
      background-color: #fafafa;
      border-top: 1px solid #e9ecef;
    }

    #equipmentAccordion .equipment-mobile-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.4rem 0;
      border-bottom: 1px solid #eee;
    }

    #equipmentAccordion .equipment-mobile-row:last-child {
      border-bottom: none;
    }

    #equipmentAccordion .equipment-mobile-label {
      font-size: 0.8rem;
      color: #6c757d;
      font-weight: 500;
    }

    #equipmentAccordion .equipment-mobile-value {
      font-weight: 600;
    }

    #equipmentAccordion .equipment-mobile-input {
      width: 70px;
      font-size: 0.85rem;
      padding: 0.3rem 0.5rem;
      text-align: center;
    }

    #equipmentAccordion .accordion-header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex: 1;
    }

    #equipmentAccordion .accordion-header-title {
      font-weight: 500;
      font-size: 0.85rem;
      color: #212529;
    }

    #equipmentAccordion .nilai-equipment-mobile {
      font-size: 0.75rem;
      padding: 0.2rem 0.5rem;
      min-width: 35px;
      text-align: center;
    }

    #equipmentAccordion .accordion-item.is-complete .accordion-button {
      background-color: #fff;
    }

    #equipmentAccordion .accordion-item.is-complete .nilai-equipment-mobile {
      background-color: #198754;
    }

    /* Mobile */
    @media (max-width: 768px) {

      /* Page title */
      .pagetitle h1 {
        font-size: 1.25rem;
      }

      .pagetitle .breadcrumb {
        font-size: 0.75rem;
      }

      /* Section cards */
      .section-card .card-header h6 {
        font-size: 0.85rem;
      }

      .section-card .card-body {
        padding: 0.75rem !important;
      }

      /* Form labels and inputs */
      .form-label {
        font-size: 0.8rem;
        margin-bottom: 0.25rem;
      }

      .form-control,
      .form-select {
        font-size: 0.85rem;
        padding: 0.4rem 0.6rem;
      }

      /* Equipment table */
      #equipmentTable {
        font-size: 0.75rem;
      }

      #equipmentTable thead th {
        padding: 0.4rem 0.25rem;
        font-size: 0.65rem;
      }

      #equipmentTable tbody td {
        padding: 0.35rem 0.25rem;
      }

      .equipment-input {
        padding: 0.2rem;
        font-size: 0.8rem;
        min-width: 40px;
      }

      .nilai-equipment {
        font-size: 0.7rem;
        padding: 0.15rem 0.35rem;
      }

      /* Table container on mobile */
      .table-responsive {
        max-height: 350px !important;
      }

      /* Progress section */
      #equipmentCountBadge {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem !important;
      }

      /* Total score section */
      .border-top .text-muted.small {
        font-size: 0.7rem;
        display: none;
      }

      /* Integrity section */
      .integrity-section {
        padding: 0.5rem 0.75rem;
      }

      .integrity-section .form-check-label span strong {
        font-size: 0.85rem;
      }

      .integrity-section .form-check-label p {
        font-size: 0.75rem !important;
      }

      /* Submit buttons - stack on mobile */
      #submitContainer {
        flex-direction: column;
        align-items: stretch !important;
      }

      #submitContainer .btn {
        width: 100%;
        margin-bottom: 0.25rem;
      }

      #submitEvaluationBtn {
        order: -1;
      }

      /* Card body spacing */
      .card-body {
        padding: 0.75rem;
      }

      /* Row gaps */
      .row.g-3 {
        --bs-gutter-y: 0.75rem;
      }

      /* Small text helpers */
      small.text-muted {
        font-size: 0.7rem;
      }

      /* Modal adjustments */
      .modal-dialog {
        margin: 0.5rem;
      }

      .modal-body .row.g-3 {
        --bs-gutter-x: 0.5rem;
        --bs-gutter-y: 0.5rem;
      }
    }

    /* Extra small screens (phones in portrait) */
    @media (max-width: 480px) {
      #equipmentTable thead th:nth-child(3) {
        display: none;
        /* Hide Kategori column */
      }

      #equipmentTable tbody td:nth-child(3) {
        display: none;
      }

      .pagetitle h1 {
        font-size: 1.1rem;
      }

      .section-card .card-header .badge {
        display: none;
        /* Hide step badges */
      }
    }
  </style>
  <!-- Role-based menu visibility - must run before body renders -->
  <script>
    (function () {
      var role = localStorage.getItem('user_role') || '';
      if (role) {
        document.documentElement.className += ' role-' + role;
      }
    })();
  </script>

</head>

<body>
  <!-- Header -->
  <header id="header" class="header fixed-top d-flex align-items-center">
    <div class="d-flex align-items-center justify-content-between">
      <a href="index.html" class="logo d-flex align-items-center">
        <i class="bi bi-shield-check fs-4 text-primary me-2"></i>
        <span class="d-none d-lg-block">Penilaian Alat Kerja</span>
      </a>
      <i class="bi bi-list toggle-sidebar-btn"></i>
    </div>

    <div class="search-bar">
      <form class="search-form d-flex align-items-center" method="POST" action="#">
        <input type="text" name="query" placeholder="Search" title="Enter search keyword" />
        <button type="submit" title="Search">
          <i class="bi bi-search"></i>
        </button>
      </form>
    </div>

    <nav class="header-nav ms-auto">
      <ul class="d-flex align-items-center">

        <li class="nav-item d-block d-lg-none">
          <a class="nav-link nav-icon search-bar-toggle " href="#">
            <i class="bi bi-search"></i>
          </a>
        </li><!-- End Search Icon-->

        <!-- Notification Nav - Hidden -->
        <li class="nav-item dropdown" style="display: none;">
          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-bell"></i>
            <span class="badge bg-primary badge-number">0</span>
          </a>
        </li>

        <!-- Messages Nav - Hidden -->
        <li class="nav-item dropdown" style="display: none;">
          <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-chat-left-text"></i>
            <span class="badge bg-success badge-number">0</span>
          </a>
        </li>

        <li class="nav-item dropdown pe-3">

          <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
            <div id="navProfileInitial"
              class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
              style="width: 36px; height: 36px; font-size: 16px; font-weight: 600;">?</div>
            <span id="navProfileName" class="d-none d-md-block dropdown-toggle ps-2">Loading...</span>
          </a><!-- End Profile Image Icon -->

          <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
            <li class="dropdown-header">
              <h6 id="navProfileFullName">Loading...</h6>
              <span id="navProfileRole">-</span>
            </li>
            <li>
              <hr class="dropdown-divider">
            </li>

            <li class="hide-for-petugas">
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-person"></i>
                <span>My Profile</span>
              </a>
            </li>
            <li class="hide-for-petugas">
              <hr class="dropdown-divider">
            </li>

            <li class="hide-for-petugas">
              <a class="dropdown-item d-flex align-items-center" href="users-profile.html">
                <i class="bi bi-gear"></i>
                <span>Account Settings</span>
              </a>
            </li>
            <li class="hide-for-petugas">
              <hr class="dropdown-divider">
            </li>

            <li class="hide-for-petugas">
              <a class="dropdown-item d-flex align-items-center" href="pages-faq.html">
                <i class="bi bi-question-circle"></i>
                <span>Need Help?</span>
              </a>
            </li>
            <li class="hide-for-petugas">
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item d-flex align-items-center" href="#" id="logoutBtn">
                <i class="bi bi-box-arrow-right"></i>
                <span>Sign Out</span>
              </a>
            </li>

          </ul><!-- End Profile Dropdown Items -->
        </li><!-- End Profile Nav -->

      </ul>
    </nav><!-- End Icons Navigation -->
  </header>

  <!-- ======= Sidebar ======= -->
  <aside id="sidebar" class="sidebar">

    <ul class="sidebar-nav" id="sidebar-nav">

      <li class="nav-item">
        <a class="nav-link collapsed" href="index.html">
          <i class="bi bi-grid"></i>
          <span>Dashboard</span>
        </a>
      </li><!-- End Dashboard Nav -->

      <li class="nav-heading">Penilaian</li>

      <li class="nav-item">
        <a class="nav-link" data-bs-target="#forms-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-menu-button-wide"></i><span>Formulir</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="forms-nav" class="nav-content collapse show" data-bs-parent="#sidebar-nav">
          <li>
            <a href="forms-penilaian.html" class="active">
              <i class="bi bi-circle"></i><span>Form Penilaian</span>
            </a>
          </li>
          <li>
            <a href="forms-data-penilaian.html">
              <i class="bi bi-circle"></i><span>Riwayat Penilaian</span>
            </a>
          </li>
          <li>
            <a href="data-standar-peralatan.html">
              <i class="bi bi-circle"></i><span>Standar Peralatan</span>
            </a>
          </li>

        </ul>
      </li><!-- End Components Nav -->

      <li class="nav-heading">Pengaturan</li>

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#data-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-journal-text"></i><span>Data Master</span><i class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="data-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li id="menu-unit"><a href="data-unit.html">
              <i class="bi bi-circle"></i><span>Unit</span>
            </a>
          </li>
          <li id="menu-vendor">
            <a href="data-vendor.html">
              <i class="bi bi-circle"></i><span>Pelaksana</span>
            </a>
          </li>
          <li id="menu-peruntukan">
            <a href="data-peruntukan.html">
              <i class="bi bi-circle"></i><span>Peruntukan</span>
            </a>
          </li>
          <li id="menu-peralatan">
            <a href="data-peralatan.html">
              <i class="bi bi-circle"></i><span>Peralatan</span>
            </a>
          </li>
          <li id="menu-kendaraan">
            <a href="data-kendaraan.html">
              <i class="bi bi-circle"></i><span>Kendaraan</span>
            </a>
          </li>
          <li id="menu-personil">
            <a href="data-personil.html">
              <i class="bi bi-circle"></i><span>Personil</span>
            </a>
          </li>
          <li id="menu-vendor-assets">
            <a href="data-vendor-assets.html">
              <i class="bi bi-circle"></i><span>Inventaris Vendor</span>
            </a>
          </li>

        </ul>
      </li><!-- End Pengaturan Nav -->

      <li class="nav-item">
        <a class="nav-link collapsed" data-bs-target="#users-nav" data-bs-toggle="collapse" href="#">
          <i class="bi bi-layout-text-window-reverse"></i><span>Pengguna</span><i
            class="bi bi-chevron-down ms-auto"></i>
        </a>
        <ul id="users-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
          <li>
            <a href="users-tambah-pengguna.html">
              <i class="bi bi-circle"></i><span>Tambah Pengguna</span>
            </a>
          </li>
          <li>
            <a href="users-data-pengguna.html">
              <i class="bi bi-circle"></i><span>Daftar Pengguna</span>
            </a>
          </li>
        </ul>
      </li><!-- End Users Nav -->

      <li class="nav-heading">Profil</li>

      <li class="nav-item">
        <a class="nav-link collapsed" href="users-profile.html">
          <i class="bi bi-person"></i>
          <span>Profil</span>
        </a>
      </li><!-- End Profile Page Nav -->

      <li class="nav-item" id="menu-log">
        <a class="nav-link collapsed" href="users-log.html">
          <i class="bi bi-file-earmark-text"></i>
          <span>Log</span>
        </a>
      </li><!-- End Log Page Nav -->



    </ul>

  </aside><!-- End Sidebar-->

  <main id="main" class="main">
    <div class="pagetitle mb-3">
      <h1>Formulir Penilaian</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item">Penilaian</li>
          <li class="breadcrumb-item active">Formulir Penilaian</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row g-3">
        <div class="col-12">
          <div class="card shadow-sm border-0">
            <div class="card-body pt-4 pb-4">

              <form id="modalPenilaianForm">
                <!-- Section 1: Session Info -->
                <div class="card border mb-4 section-card">
                  <div class="card-header border-bottom py-2">
                    <h6 class="mb-0 text-dark">
                      <i class="bi bi-calendar-event me-2 text-primary"></i>Informasi Sesi Penilaian
                      <span class="badge bg-primary bg-opacity-10 text-primary ms-2 fw-normal">Langkah 1</span>
                    </h6>
                  </div>
                  <div class="card-body py-3">
                    <div class="row g-3">
                      <div class="col-6 col-md-3">
                        <label class="form-label fw-semibold"><i
                            class="bi bi-calendar3 me-1 text-muted"></i>Tanggal</label>
                        <input type="date" class="form-control" id="modalTanggal" required />
                      </div>
                      <div class="col-6 col-md-3">
                        <label for="modalShift" class="form-label fw-semibold"><i
                            class="bi bi-clock me-1 text-muted"></i>Shift</label>
                        <select id="modalShift" class="form-select" required>
                          <option value="">-- Pilih Shift --</option>
                          <option value="1">Shift 1 </option>
                          <option value="2">Shift 2 </option>
                          <option value="3">Shift 3 </option>
                        </select>
                      </div>
                      <div class="col-6 col-md-3">
                        <label for="modalUnit" class="form-label fw-semibold"><i
                            class="bi bi-building me-1 text-muted"></i>Unit</label>
                        <select id="modalUnit" class="form-select" required>
                          <option value="">-- Pilih Unit --</option>
                        </select>
                      </div>
                      <div class="col-6 col-md-3">
                        <label for="modalVendor" class="form-label fw-semibold"><i
                            class="bi bi-truck me-1 text-muted"></i>Pelaksana</label>
                        <select id="modalVendor" class="form-select" required>
                          <option value="">-- Pilih Pelaksana --</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Section 2: Peruntukan Info -->
                <div class="card border mb-4 section-card">
                  <div class="card-header border-bottom py-2">
                    <h6 class="mb-0 text-dark">
                      <i class="bi bi-bullseye me-2 text-success"></i>Detail Peruntukan
                      <span class="badge bg-success bg-opacity-10 text-success ms-2 fw-normal">Langkah 2</span>
                    </h6>
                  </div>
                  <div class="card-body py-3">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label for="modalJenis" class="form-label fw-semibold"><i
                            class="bi bi-tags me-1 text-muted"></i>Jenis Peruntukan</label>
                        <select id="modalJenis" class="form-select" required>
                          <option value="">-- Pilih Jenis --</option>
                        </select>
                        <small class="text-muted">Personal (individu) atau Regu (tim/kendaraan)</small>
                      </div>
                      <div class="col-md-6">
                        <label for="modalPeruntukan" class="form-label fw-semibold"><i
                            class="bi bi-diagram-3 me-1 text-muted"></i>Peruntukan</label>
                        <select id="modalPeruntukan" class="form-select" required>
                          <option value="">-- Pilih Peruntukan --</option>
                        </select>
                        <small class="text-muted">Pilih peruntukan spesifik untuk penilaian</small>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Section 3: Additional Info (Kendaraan & Petugas) -->
                <div class="card border mb-4 section-card">
                  <div class="card-header border-bottom py-2">
                    <h6 class="mb-0 text-dark">
                      <i class="bi bi-person-badge me-2 text-info"></i>Identitas Penilaian
                      <span class="badge bg-info bg-opacity-10 text-info ms-2 fw-normal">Langkah 3</span>
                    </h6>
                  </div>
                  <div class="card-body py-3">
                    <div class="row g-3">
                      <!-- Kendaraan - Dropdown + Tombol Tambah -->
                      <div class="col-md-6">
                        <label class="form-label fw-semibold">
                          <i class="bi bi-car-front me-1 text-muted"></i>Kendaraan / Regu
                        </label>
                        <div class="input-group">
                          <select id="modalNopolSelect" class="form-select">
                            <option value="">-- Pilih Kendaraan --</option>
                          </select>
                          <button type="button" class="btn btn-outline-secondary" id="btnAddKendaraan"
                            data-bs-toggle="modal" data-bs-target="#modalTambahKendaraan" title="Tambah Kendaraan Baru">
                            <i class="bi bi-plus-lg"></i>
                          </button>
                        </div>
                        <input type="hidden" id="modalTeamId" value="" />
                      </div>

                      <!-- Petugas - Dropdown + Tombol Tambah -->
                      <div class="col-md-6">
                        <label class="form-label fw-semibold">
                          <i class="bi bi-people me-1 text-muted"></i>Petugas Penilai
                          <small class="text-muted fw-normal">(pilih satu atau lebih)</small>
                        </label>
                        <div class="input-group">
                          <select id="modalPetugasSelect" class="form-select">
                            <option value="">-- Pilih Petugas --</option>
                            <!-- Options akan diisi oleh JavaScript -->
                          </select>
                          <button type="button" class="btn btn-outline-secondary" id="btnAddPetugas"
                            data-bs-toggle="modal" data-bs-target="#modalTambahPetugas" title="Tambah Petugas Baru">
                            <i class="bi bi-plus-lg"></i>
                          </button>
                        </div>
                        <input type="hidden" id="modalPersonnelId" value="" />
                        <!-- Container untuk selected petugas badges -->
                        <div id="selectedPetugasContainer" class="mt-2 d-flex flex-wrap gap-1">
                          <!-- Selected petugas badges akan ditampilkan di sini -->
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Section 4: Equipment Evaluation Table -->
                <div class="card border shadow-sm section-card">
                  <div class="card-header border-bottom py-2">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                      <h6 class="mb-0 text-dark">
                        <i class="bi bi-list-check me-2 text-warning"></i>Daftar Peralatan untuk Dinilai
                      </h6>
                      <span class="badge bg-dark px-2 py-1" id="equipmentCountBadge">
                        <i class="bi bi-box-seam me-1"></i><span id="progressText">0/0</span> Item
                      </span>
                    </div>
                    <!-- Simplified Progress Bar -->
                    <div class="progress" style="height: 4px; border-radius: 2px;">
                      <div class="progress-bar" role="progressbar" id="progressBar" style="width: 0%" aria-valuenow="0"
                        aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                  </div>
                  <div class="card-body p-3">

                    <!-- Equipment Table (Desktop) -->
                    <div class="table-responsive d-none d-md-block" style="max-height: 450px; overflow-y: auto;">
                      <table class="table table-hover table-bordered align-middle mb-0" id="equipmentTable">
                        <thead class="table-dark sticky-top">
                          <tr>
                            <th class="text-center py-2" style="width: 40px; font-size: 0.8rem;">#</th>
                            <th class="py-2" style="min-width: 150px; font-size: 0.8rem;">Nama Peralatan</th>
                            <th class="text-center py-2" style="width: 90px; font-size: 0.8rem;">Kategori</th>
                            <th class="text-center py-2" style="width: 75px; font-size: 0.8rem;"
                              title="Jumlah standar sesuai kontrak">Standar</th>
                            <th class="text-center py-2" style="width: 75px; font-size: 0.8rem;"
                              title="Jumlah aktual di lapangan">Realisasi</th>
                            <th class="text-center py-2" style="width: 70px; font-size: 0.8rem;"
                              title="Kondisi fisik layak">Layak</th>
                            <th class="text-center py-2" style="width: 70px; display: none;">Tidak Layak</th>
                            <th class="text-center py-2" style="width: 70px; font-size: 0.8rem;"
                              title="Berfungsi dengan baik">Fungsi</th>
                            <th class="text-center py-2" style="width: 70px; display: none;">Tidak Berfungsi</th>
                            <th class="text-center py-2" style="width: 60px; font-size: 0.8rem;"
                              title="Nilai: -2 s/d +2">Nilai</th>
                          </tr>
                        </thead>
                        <tbody id="equipmentTableBody">
                          <!-- Equipment rows akan diisi oleh JavaScript -->
                          <tr id="loadingRow">
                            <td colspan="10" class="text-center py-5">
                              <div class="d-flex flex-column align-items-center">
                                <div class="bg-light rounded-circle p-4 mb-3">
                                  <i class="bi bi-inbox fs-1 text-muted"></i>
                                </div>
                                <h6 class="text-muted mb-2">Belum Ada Data Peralatan</h6>
                                <p class="text-muted mb-0 small">
                                  <i class="bi bi-arrow-up me-1"></i>
                                  Lengkapi <strong>Informasi Sesi</strong> dan <strong>Detail Peruntukan</strong> di
                                  atas
                                  <br>untuk memuat daftar peralatan yang akan dinilai
                                </p>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>

                    <!-- Equipment Accordion (Mobile) -->
                    <div class="d-block d-md-none" id="equipmentAccordionContainer"
                      style="max-height: 450px; overflow-y: auto;">
                      <div class="accordion" id="equipmentAccordion">
                        <!-- Accordion items akan diisi oleh JavaScript -->
                        <div id="accordionLoadingRow" class="text-center py-5">
                          <div class="d-flex flex-column align-items-center">
                            <div class="bg-light rounded-circle p-4 mb-3">
                              <i class="bi bi-inbox fs-1 text-muted"></i>
                            </div>
                            <h6 class="text-muted mb-2">Belum Ada Data Peralatan</h6>
                            <p class="text-muted mb-0 small">
                              <i class="bi bi-arrow-up me-1"></i>
                              Lengkapi <strong>Informasi Sesi</strong> dan <strong>Detail Peruntukan</strong>
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- Total Score Section -->
                    <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
                      <div class="text-muted small">
                        <i class="bi bi-info-circle me-1"></i>
                        <strong>Standar</strong> = kontrak | <strong>Realisasi</strong> = aktual |
                        <strong>Layak</strong> = fisik baik | <strong>Fungsi</strong> = berfungsi
                      </div>
                      <div class="d-flex align-items-center gap-2">
                        <span class="text-muted small">Total Skor:</span>
                        <span class="badge bg-primary fs-6 px-3 py-2" id="totalScore">0.00</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Form Submit Section -->
                <div class="card border-0 mt-4 shadow-sm">
                  <div class="card-body py-3">
                    <div class="row g-3 align-items-start">
                      <!-- Integrity Checkbox -->
                      <div class="col-12 col-lg-8">
                        <div class="integrity-section" id="integritySectionWrapper">
                          <div class="form-check mb-0">
                            <input class="form-check-input" type="checkbox" id="integrityCheckbox"
                              style="width: 1.25em; height: 1.25em; cursor: pointer; margin-top: 0.15em;">
                            <label class="form-check-label ms-2" for="integrityCheckbox" style="cursor: pointer;">
                              <span class="d-flex align-items-start">
                                <i class="bi bi-shield-lock-fill text-warning me-2 fs-5"></i>
                                <span>
                                  <strong class="text-dark">Pernyataan Integritas</strong>
                                  <p class="mb-0 text-muted small mt-1">
                                    Dengan prinsip integritas, saya menyatakan bahwa data yang diisi adalah sesuai
                                    dengan fakta dan kondisi sebenarnya
                                  </p>
                                </span>
                              </span>
                            </label>
                          </div>
                        </div>
                      </div>
                      <!-- Submit Buttons -->
                      <div class="col-12 col-lg-4">
                        <div id="submitContainer"
                          class="d-flex gap-2 justify-content-lg-end justify-content-center align-items-center">
                          <button type="button" class="btn btn-outline-secondary px-2" id="resetFormBtn"
                            title="Reset Form">
                            <i class="bi bi-arrow-counterclockwise"></i>
                          </button>
                          <button type="button" class="btn btn-secondary px-4" id="submitEvaluationBtn" disabled>
                            <i class="bi bi-clock me-1"></i> Lengkapi Penilaian (0/0)
                          </button>
                        </div>
                        <div id="submitLoadingIndicator" class="mt-2 text-end" style="display: none;">
                          <div class="spinner-border spinner-border-sm text-primary me-2" role="status"></div>
                          <span class="text-muted small">Menyimpan...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>
  <!-- End #main -->

  <!-- Modal Tambah Kendaraan Baru -->
  <div class="modal fade" id="modalTambahKendaraan" tabindex="-1" aria-labelledby="modalTambahKendaraanLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header py-2 bg-light">
          <h6 class="modal-title" id="modalTambahKendaraanLabel">
            <i class="bi bi-car-front me-2"></i>Tambah Kendaraan Baru
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <!-- Field Terkunci -->
            <div class="col-6">
              <label class="form-label text-muted small">Unit</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalKendaraan_Unit" readonly />
            </div>
            <div class="col-6">
              <label class="form-label text-muted small">Vendor</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalKendaraan_Vendor" readonly />
            </div>
            <div class="col-12">
              <label class="form-label text-muted small">Peruntukan</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalKendaraan_Peruntukan"
                readonly />
            </div>
            <hr class="my-2" />
            <!-- Input Nomor Polisi dan Kategori -->
            <div class="col-5">
              <label class="form-label fw-semibold">Nomor Polisi <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="inputNomorPolisi" placeholder="Contoh: B 1234 XYZ" required />
            </div>
            <div class="col-4">
              <label class="form-label fw-semibold">Kategori <span class="text-danger">*</span></label>
              <select class="form-select" id="inputKategoriKendaraan" required>
                <option value="">-- Pilih --</option>
                <option value="Roda 2">Roda 2 (Motor)</option>
                <option value="Roda 4">Roda 4 (Mobil)</option>
                <option value="Roda 6">Roda 6 (Truk)</option>
                <option value="Lainnya">Lainnya</option>
              </select>
            </div>
            <div class="col-3">
              <label class="form-label fw-semibold">Keterangan</label>
              <input type="text" class="form-control" id="inputKeteranganKendaraan" placeholder="Opsional" />
            </div>
          </div>
        </div>
        <div class="modal-footer py-2">
          <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
            <i class="bi bi-x-lg me-1"></i>Batal
          </button>
          <button type="button" class="btn btn-primary btn-sm" id="btnSimpanKendaraan">
            <i class="bi bi-check-lg me-1"></i>Simpan
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Tambah Petugas Baru -->
  <div class="modal fade" id="modalTambahPetugas" tabindex="-1" aria-labelledby="modalTambahPetugasLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header py-2 bg-light">
          <h6 class="modal-title" id="modalTambahPetugasLabel">
            <i class="bi bi-person-plus me-2"></i>Tambah Petugas Baru
          </h6>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <!-- Field Terkunci -->
            <div class="col-6">
              <label class="form-label text-muted small">Unit</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalPetugas_Unit" readonly />
            </div>
            <div class="col-6">
              <label class="form-label text-muted small">Vendor</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalPetugas_Vendor" readonly />
            </div>
            <div class="col-12">
              <label class="form-label text-muted small">Peruntukan</label>
              <input type="text" class="form-control form-control-sm bg-light" id="modalPetugas_Peruntukan" readonly />
            </div>
            <hr class="my-2" />
            <!-- Input Nama Petugas -->
            <div class="col-12">
              <label class="form-label fw-semibold">Nama Petugas <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="inputNamaPetugas" placeholder="Masukkan nama petugas"
                required />
            </div>
          </div>
        </div>
        <div class="modal-footer py-2">
          <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">
            <i class="bi bi-x-lg me-1"></i>Batal
          </button>
          <button type="button" class="btn btn-primary btn-sm" id="btnSimpanPetugas">
            <i class="bi bi-check-lg me-1"></i>Simpan
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
      class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/chart.js/chart.umd.js"></script>
  <script src="assets/vendor/echarts/echarts.min.js"></script>
  <script src="assets/vendor/quill/quill.js"></script>
  <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
  <script src="assets/vendor/tinymce/tinymce.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Supabase CDN & SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Supabase Config & API -->
  <script src="assets/js/config/supabase-client.js"></script>
  <script src="assets/js/auth/supabase-auth.js"></script>
  <script src="assets/js/api/profiles.js"></script>
  <script src="assets/js/api/units.js"></script>
  <script src="assets/js/api/vendors.js"></script>
  <script src="assets/js/api/peruntukan.js"></script>
  <script src="assets/js/api/teams.js"></script>
  <script src="assets/js/api/personnel.js"></script>
  <script src="assets/js/api/equipment.js"></script>
  <script src="assets/js/api/equipment-standards.js"></script>
  <script src="assets/js/api/vendor-assets.js"></script>
  <script src="assets/js/api/assessments.js"></script>

  <!-- Form Penilaian JS Files -->
  <script src="assets/js/form-penilaian-manager.js"></script>
  <script src="assets/js/form-penilaian-load.js"></script>
  <script src="assets/js/form-penilaian-submit.js"></script>

</body>

</html>